using System;
using System.IO;
using Json.Models.NodeJson;
using Json.Services;
using Newtonsoft.Json;

namespace JsonTransformerConsoleApp
{
    class Program
    {
        //static void Main(string[] args)
        //{
        //    // Step 1: Read the node.json file
        //    string nodeJsonFilePath = "node.json"; // Path to your node.json file
        //    string nodeJsonContent = File.ReadAllText(nodeJsonFilePath);

        //    // Step 2: Deserialize the JSON into the NodeJson object
        //    var nodeJson = JsonConvert.DeserializeObject<NodeJson>(nodeJsonContent);

        //    if (nodeJson == null)
        //    {
        //        Console.WriteLine("Failed to deserialize node.json.");
        //        return;
        //    }

        //    // Step 3: Transform the data
        //    var transformerService = new JsonTransformerService();
        //    var schemaJson = transformerService.Transform(nodeJson);

        //    // Step 4: Serialize the result to JSON
        //    string schemaJsonContent = JsonConvert.SerializeObject(schemaJson, Formatting.Indented);

        //    // Step 5: Output the result to a file or console
        //    string schemaJsonFilePath = "Schema.json"; // Path to save the output
        //    File.WriteAllText(schemaJsonFilePath, schemaJsonContent);

        //    Console.WriteLine("Transformation complete! Output saved to Schema.json.");
        //}

        static void Main(string[] args)
        {
            // Input JSON string
            string jsonInput = "{\r\n    \"lastUpdateId\": 5134445724,\r\n    \"requestedUpdateId\": -1,\r\n    \"ttl\": 300,\r\n    \"standings\": [\r\n        {\r\n            \"competitionId\": 7,\r\n            \"seasonNum\": 130,\r\n            \"stageNum\": 1,\r\n            \"isCurrentStage\": true,\r\n            \"displayName\": \"Premier League\",\r\n            \"currentGroupCategory\": 0,\r\n            \"headers\": [\r\n                {\r\n                    \"key\": \"gamePlayed\",\r\n                    \"name\": \"P\",\r\n                    \"isMajor\": true\r\n                },\r\n                {\r\n                    \"key\": \"goals\",\r\n                    \"name\": \"F:A\",\r\n                    \"isMajor\": true\r\n                },\r\n                {\r\n                    \"key\": \"ratio\",\r\n                    \"name\": \"+/-\",\r\n                    \"isMajor\": true\r\n                },\r\n                {\r\n                    \"key\": \"points\",\r\n                    \"name\": \"PTS\",\r\n                    \"isMajor\": true\r\n                },\r\n                {\r\n                    \"key\": \"gamesWon\",\r\n                    \"name\": \"W\",\r\n                    \"isMajor\": false\r\n                },\r\n                {\r\n                    \"key\": \"gamesEven\",\r\n                    \"name\": \"D\",\r\n                    \"isMajor\": false\r\n                },\r\n                {\r\n                    \"key\": \"gamesLost\",\r\n                    \"name\": \"L\",\r\n                    \"isMajor\": false\r\n                },\r\n                {\r\n                    \"key\": \"recentForm\",\r\n                    \"name\": \"Form\",\r\n                    \"isMajor\": false\r\n                },\r\n                {\r\n                    \"key\": \"nextMatch\",\r\n                    \"name\": \"Next\",\r\n                    \"isMajor\": false\r\n                }\r\n            ],\r\n            \"rows\": [\r\n                {\r\n                    \"competitor\": {\r\n                        \"id\": 108,\r\n                        \"countryId\": 1,\r\n                        \"sportId\": 1,\r\n                        \"name\": \"Liverpool\",\r\n                        \"symbolicName\": \"LIV\",\r\n                        \"nameForURL\": \"liverpool\",\r\n                        \"type\": 1,\r\n                        \"popularityRank\": 50113,\r\n                        \"imageVersion\": 22,\r\n                        \"color\": \"#A20109\",\r\n                        \"awayColor\": \"#FFFFFF\",\r\n                        \"mainCompetitionId\": 7,\r\n                        \"hasSquad\": true,\r\n                        \"hasTransfers\": false,\r\n                        \"competitorNum\": 0,\r\n                        \"hideOnSearch\": false,\r\n                        \"hideOnCatalog\": false\r\n                    },\r\n                    \"gamePlayed\": 29,\r\n                    \"gamesWon\": 21,\r\n                    \"gamesLost\": 1,\r\n                    \"gamesEven\": 7,\r\n                    \"for\": 69,\r\n                    \"against\": 27,\r\n                    \"ratio\": 42.0,\r\n                    \"points\": 70.0,\r\n                    \"strike\": 3,\r\n                    \"gamesOT\": 0,\r\n                    \"gamesWonOnOT\": 0,\r\n                    \"gamesWonOnPen\": 0,\r\n                    \"gamesLossOnOT\": 0,\r\n                    \"gamesLossOnPen\": 0,\r\n                    \"pct\": \".724\",\r\n                    \"position\": 1,\r\n                    \"trend\": 0,\r\n                    \"detailedRecentForm\": [\r\n                        {\r\n                            \"id\": 4147294,\r\n                            \"sportId\": 1,\r\n                            \"competitionId\": 7,\r\n                            \"seasonNum\": 130,\r\n                            \"stageNum\": 1,\r\n                            \"roundNum\": 28,\r\n                            \"roundName\": \"Matchweek\",\r\n                            \"competitionDisplayName\": \"Premier League\",\r\n                            \"startTime\": \"2025-03-08T18:30:00+03:30\",\r\n                            \"statusGroup\": 4,\r\n                            \"statusText\": \"Ended\",\r\n                            \"shortStatusText\": \"Ended\",\r\n                            \"gameTimeAndStatusDisplayType\": 1,\r\n                            \"homeCompetitor\": {\r\n                                \"id\": 108,\r\n                                \"countryId\": 1,\r\n                                \"sportId\": 1,\r\n                                \"name\": \"Liverpool\",\r\n                                \"score\": 3.0,\r\n                                \"isWinner\": true,\r\n                                \"nameForURL\": \"liverpool\",\r\n                                \"type\": 1,\r\n                                \"popularityRank\": 50113,\r\n                                \"outcome\": 1,\r\n                                \"imageVersion\": 22,\r\n                                \"color\": \"#A20109\",\r\n                                \"awayColor\": \"#FFFFFF\",\r\n                                \"hasSquad\": true,\r\n                                \"hasTransfers\": false,\r\n                                \"competitorNum\": 1,\r\n                                \"hideOnSearch\": false,\r\n                                \"hideOnCatalog\": false\r\n                            },\r\n                            \"awayCompetitor\": {\r\n                                \"id\": 21,\r\n                                \"countryId\": 1,\r\n                                \"sportId\": 1,\r\n                                \"name\": \"Southampton\",\r\n                                \"score\": 1.0,\r\n                                \"isWinner\": false,\r\n                                \"nameForURL\": \"southampton\",\r\n                                \"type\": 1,\r\n                                \"popularityRank\": 4658,\r\n                                \"outcome\": 1,\r\n                                \"imageVersion\": 3,\r\n                                \"color\": \"#EB1231\",\r\n                                \"awayColor\": \"#FFFF00\",\r\n                                \"hasSquad\": true,\r\n                                \"hasTransfers\": false,\r\n                                \"competitorNum\": 2,\r\n                                \"hideOnSearch\": false,\r\n                                \"hideOnCatalog\": false\r\n                            },\r\n                            \"outcome\": 1,\r\n                            \"winner\": 1,\r\n                            \"scores\": [\r\n                                3.0,\r\n                                1.0\r\n                            ],\r\n                            \"homeAwayTeamOrder\": 1,\r\n                            \"hasPointByPoint\": false\r\n                        },\r\n                        {\r\n                            \"id\": 4147288,\r\n                            \"sportId\": 1,\r\n                            \"competitionId\": 7,\r\n                            \"seasonNum\": 130,\r\n                            \"stageNum\": 1,\r\n                            \"roundNum\": 27,\r\n                            \"roundName\": \"Matchweek\",\r\n                            \"competitionDisplayName\": \"Premier League\",\r\n                            \"startTime\": \"2025-02-26T23:45:00+03:30\",\r\n                            \"statusGroup\": 4,\r\n                            \"statusText\": \"Ended\",\r\n                            \"shortStatusText\": \"Ended\",\r\n                            \"gameTimeAndStatusDisplayType\": 1,\r\n                            \"homeCompetitor\": {\r\n                                \"id\": 108,\r\n                                \"countryId\": 1,\r\n                                \"sportId\": 1,\r\n                                \"name\": \"Liverpool\",\r\n                                \"score\": 2.0,\r\n                                \"isWinner\": true,\r\n                                \"nameForURL\": \"liverpool\",\r\n                                \"type\": 1,\r\n                                \"popularityRank\": 50113,\r\n                                \"outcome\": 1,\r\n                                \"imageVersion\": 22,\r\n                                \"color\": \"#A20109\",\r\n                                \"awayColor\": \"#FFFFFF\",\r\n                                \"hasSquad\": true,\r\n                                \"hasTransfers\": false,\r\n                                \"competitorNum\": 1,\r\n                                \"hideOnSearch\": false,\r\n                                \"hideOnCatalog\": false\r\n                            },\r\n                            \"awayCompetitor\": {\r\n                                \"id\": 116,\r\n                                \"countryId\": 1,\r\n                                \"sportId\": 1,\r\n                                \"name\": \"Newcastle United\",\r\n                                \"shortName\": \"Newcastle Utd\",\r\n                                \"score\": 0.0,\r\n                                \"isWinner\": false,\r\n                                \"nameForURL\": \"newcastle-united\",\r\n                                \"type\": 1,\r\n                                \"popularityRank\": 6625,\r\n                                \"outcome\": 1,\r\n                                \"imageVersion\": 1,\r\n                                \"color\": \"#007BFF\",\r\n                                \"awayColor\": \"#952B39\",\r\n                                \"hasSquad\": true,\r\n                                \"hasTransfers\": false,\r\n                                \"competitorNum\": 2,\r\n                                \"hideOnSearch\": false,\r\n                                \"hideOnCatalog\": false\r\n                            },\r\n                            \"outcome\": 1,\r\n                            \"winner\": 1,\r\n                            \"scores\": [\r\n                                2.0,\r\n                                0.0\r\n                            ],\r\n                            \"homeAwayTeamOrder\": 1,\r\n                            \"hasPointByPoint\": false\r\n                        }\r\n                    ],\r\n                    \"nextMatch\": {\r\n                        \"id\": 4147319,\r\n                        \"sportId\": 1,\r\n                        \"competitionId\": 7,\r\n                        \"seasonNum\": 130,\r\n                        \"stageNum\": 1,\r\n                        \"roundNum\": 30,\r\n                        \"roundName\": \"Matchweek\",\r\n                        \"competitionDisplayName\": \"Premier League\",\r\n                        \"startTime\": \"2025-04-02T22:30:00+03:30\",\r\n                        \"statusGroup\": 2,\r\n                        \"statusText\": \"Scheduled\",\r\n                        \"shortStatusText\": \"Sched.\",\r\n                        \"gameTimeAndStatusDisplayType\": 0,\r\n                        \"justEnded\": false,\r\n                        \"gameTime\": -1.0,\r\n                        \"gameTimeDisplay\": \"\",\r\n                        \"hasTVNetworks\": false,\r\n                        \"homeCompetitor\": {\r\n                            \"id\": 108,\r\n                            \"countryId\": 1,\r\n                            \"sportId\": 1,\r\n                            \"name\": \"Liverpool\",\r\n                            \"symbolicName\": \"LIV\",\r\n                            \"score\": -1.0,\r\n                            \"isQualified\": false,\r\n                            \"toQualify\": false,\r\n                            \"isWinner\": false,\r\n                            \"redCards\": 0,\r\n                            \"nameForURL\": \"liverpool\",\r\n                            \"type\": 1,\r\n                            \"popularityRank\": 50113,\r\n                            \"imageVersion\": 22,\r\n                            \"color\": \"#A20109\",\r\n                            \"awayColor\": \"#FFFFFF\",\r\n                            \"mainCompetitionId\": 7,\r\n                            \"hasSquad\": true,\r\n                            \"hasTransfers\": false,\r\n                            \"competitorNum\": 1,\r\n                            \"hideOnSearch\": false,\r\n                            \"hideOnCatalog\": false\r\n                        },\r\n                        \"awayCompetitor\": {\r\n                            \"id\": 107,\r\n                            \"countryId\": 1,\r\n                            \"sportId\": 1,\r\n                            \"name\": \"Everton\",\r\n                            \"longName\": \"Everton FC\",\r\n                            \"symbolicName\": \"EVE\",\r\n                            \"score\": -1.0,\r\n                            \"isQualified\": false,\r\n                            \"toQualify\": false,\r\n                            \"isWinner\": false,\r\n                            \"redCards\": 0,\r\n                            \"nameForURL\": \"everton\",\r\n                            \"type\": 1,\r\n                            \"popularityRank\": 7463,\r\n                            \"imageVersion\": 1,\r\n                            \"color\": \"#274488\",\r\n                            \"awayColor\": \"#303030\",\r\n                            \"mainCompetitionId\": 7,\r\n                            \"hasSquad\": true,\r\n                            \"hasTransfers\": false,\r\n                            \"competitorNum\": 2,\r\n                            \"hideOnSearch\": false,\r\n                            \"hideOnCatalog\": false\r\n                        },\r\n                        \"isHomeAwayInverted\": false,\r\n                        \"hasStandings\": true,\r\n                        \"standingsName\": \"Standings\",\r\n                        \"hasBrackets\": false,\r\n                        \"hasPreviousMeetings\": false,\r\n                        \"hasRecentMatches\": false,\r\n                        \"winner\": 0,\r\n                        \"homeAwayTeamOrder\": 0,\r\n                        \"hasPointByPoint\": false\r\n                    },\r\n                    \"recentForm\": [\r\n                        1,\r\n                        1,\r\n                        1,\r\n                        2,\r\n                        1\r\n                    ],\r\n                    \"destinationNum\": 1,\r\n                    \"ppg\": 0.0,\r\n                    \"oppg\": 0.0\r\n                }\r\n            ],\r\n            \"destinations\": [\r\n                {\r\n                    \"num\": 1,\r\n                    \"name\": \"UEFA Champions League\",\r\n                    \"guaranteedText\": \"UEFA Champions League\",\r\n                    \"color\": \"#F5CB25\",\r\n                    \"type\": 8\r\n                },\r\n                {\r\n                    \"num\": 2,\r\n                    \"name\": \"UEFA Europa League\",\r\n                    \"guaranteedText\": \"UEFA Europa League\",\r\n                    \"color\": \"#23EBE4\",\r\n                    \"type\": 9\r\n                },\r\n                {\r\n                    \"num\": 3,\r\n                    \"name\": \"Relegation\",\r\n                    \"guaranteedText\": \"Relegated\",\r\n                    \"color\": \"#E61034\",\r\n                    \"type\": 3\r\n                }\r\n            ],\r\n            \"filterTypes\": [\r\n                {\r\n                    \"type\": 1,\r\n                    \"name\": \"Overall\"\r\n                },\r\n                {\r\n                    \"type\": 2,\r\n                    \"name\": \"Home\"\r\n                },\r\n                {\r\n                    \"type\": 3,\r\n                    \"name\": \"Away\"\r\n                }\r\n            ]\r\n        }\r\n    ],\r\n    \"sports\": [\r\n        {\r\n            \"id\": 1,\r\n            \"name\": \"Football\",\r\n            \"nameForURL\": \"football\",\r\n            \"drawSupport\": true,\r\n            \"imageVersion\": 1\r\n        }\r\n    ],\r\n    \"countries\": [\r\n        {\r\n            \"id\": 1,\r\n            \"name\": \"England\",\r\n            \"nameForURL\": \"england\",\r\n            \"sportTypes\": [\r\n                1,\r\n                9,\r\n                11\r\n            ],\r\n            \"imageVersion\": 1,\r\n            \"isInternational\": false\r\n        }\r\n    ],\r\n    \"competitions\": [\r\n        {\r\n            \"id\": 7,\r\n            \"countryId\": 1,\r\n            \"sportId\": 1,\r\n            \"name\": \"Premier League\",\r\n            \"shortName\": \"EPL\",\r\n            \"hasStandings\": true,\r\n            \"hasLiveStandings\": false,\r\n            \"hasStandingsGroups\": false,\r\n            \"hasBrackets\": false,\r\n            \"nameForURL\": \"premier-league\",\r\n            \"popularityRank\": 87247066,\r\n            \"imageVersion\": 11,\r\n            \"currentStageType\": 1,\r\n            \"color\": \"#075C9C\",\r\n            \"competitorsType\": 0,\r\n            \"currentPhaseNum\": -1,\r\n            \"seasons\": [\r\n                {\r\n                    \"num\": 130,\r\n                    \"name\": \"2024/2025\",\r\n                    \"useName\": false,\r\n                    \"competitionId\": 0,\r\n                    \"hasStandings\": true,\r\n                    \"stages\": [\r\n                        {\r\n                            \"num\": 1,\r\n                            \"name\": \"Regular Season\",\r\n                            \"useName\": false,\r\n                            \"hasStandings\": true,\r\n                            \"isFinal\": false,\r\n                            \"stageType\": 1\r\n                        },\r\n                        {\r\n                            \"num\": -1,\r\n                            \"name\": \"Default\",\r\n                            \"useName\": true,\r\n                            \"hasStandings\": false,\r\n                            \"isFinal\": false,\r\n                            \"stageType\": 1\r\n                        }\r\n                    ]\r\n                }\r\n            ],\r\n            \"currentSeasonNum\": 130,\r\n            \"currentStageNum\": 1,\r\n            \"hideOnCatalog\": false,\r\n            \"hideOnSearch\": false,\r\n            \"isInternational\": false\r\n        }\r\n    ],\r\n    \"bookmakers\": []\r\n}";

            // Create an instance of the service
            IConvertor converter = new ALE();

            // Transform the JSON
            string jsonOutput = converter.Run(jsonInput);

            // Output the result
            Console.WriteLine(jsonOutput);
        }
    }
}